import{CanvasTexture,CircleBufferGeometry,Color,DoubleSide,Group,IcosahedronBufferGeometry,Mesh,MeshBasicMaterial,Shape,ShapeBufferGeometry}from"../../../build/three.module.js";import{ViveController}from"../vr/ViveController.js";var PaintViveController=function(e){ViveController.call(this,e);var t=2*Math.PI,r=0,o=new Color(1,1,1),a=1,i=new CircleBufferGeometry(1,32),n=new MeshBasicMaterial({map:function(){var e=document.createElement("canvas");e.width=256,e.height=256;for(var r=e.getContext("2d"),o=r.getImageData(0,0,256,256),a=o.data,i=new Color,n=0,s=0;n<a.length;n+=4,s++){var l=s%256/256-.5,h=Math.floor(s/256)/256-.5;i.setHSL(Math.atan2(h,l)/t,1,2*(.5-Math.sqrt(l*l+h*h))),a[n+0]=256*i.r,a[n+1]=256*i.g,a[n+2]=256*i.b,a[n+3]=256}return r.putImageData(o,0,0),new CanvasTexture(e)}()}),s=new Mesh(i,n);s.position.set(0,.005,.0495),s.rotation.x=-1.45,s.scale.setScalar(.02),this.add(s),i=new IcosahedronBufferGeometry(.1,2),(n=new MeshBasicMaterial).color=o;var l=new Mesh(i,n);s.add(l);var h=new Group;h.position.set(0,.005,.0495),h.rotation.x=-1.45,h.scale.setScalar(.02),this.add(h);var v=new Shape;v.moveTo(0,-1),v.lineTo(1,1),v.lineTo(-1,1),i=new ShapeBufferGeometry(v),n=new MeshBasicMaterial({color:2236962,wireframe:!0});var d=new Mesh(i,n);d.position.z=.001,u(d.geometry,1),h.add(d),i=new ShapeBufferGeometry(v),(n=new MeshBasicMaterial({side:DoubleSide})).color=o;var c=new Mesh(i,n);function u(e,t){var r=Math.atan(.25),o=-.75,a=1.5*t,i=Math.tan(r)*a*2,n=e.attributes.position;n.setXYZ(0,0,o,0),n.setXYZ(1,0+i/2,o+a,0),n.setXYZ(2,0-i/2,o+a,0),n.needsUpdate=!0}c.position.z=.0011,u(c.geometry,.5),h.add(c),h.visible=!1,this.getColor=function(){return o},this.getSize=function(){return a},this.addEventListener("axischanged",(function(e){if(!1!==this.getButtonState("thumbpad")){var i=e.axes[0]/2,n=-e.axes[1]/2;if(0===r&&(o.setHSL(Math.atan2(n,i)/t,1,2*(.5-Math.sqrt(i*i+n*n))),l.position.set(e.axes[0],e.axes[1],0)),1===r){var s=.5-n;a=2*s,u(c.geometry,s)}}})),this.addEventListener("gripsdown",(function(){return 0===r?(r=1,s.visible=!1,void(h.visible=!0)):1===r?(r=0,s.visible=!0,void(h.visible=!1)):void 0}))};PaintViveController.prototype=Object.create(ViveController.prototype),PaintViveController.prototype.constructor=PaintViveController;export{PaintViveController};