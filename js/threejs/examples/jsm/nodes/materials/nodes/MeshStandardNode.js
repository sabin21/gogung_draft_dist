import{Color,Vector2}from"../../../../../build/three.module.js";import{StandardNode}from"./StandardNode.js";import{PropertyNode}from"../../inputs/PropertyNode.js";import{OperatorNode}from"../../math/OperatorNode.js";import{SwitchNode}from"../../utils/SwitchNode.js";import{NormalMapNode}from"../../misc/NormalMapNode.js";function MeshStandardNode(){StandardNode.call(this),this.properties={color:new Color(16777215),roughness:.5,metalness:.5,normalScale:new Vector2(1,1)},this.inputs={color:new PropertyNode(this.properties,"color","c"),roughness:new PropertyNode(this.properties,"roughness","f"),metalness:new PropertyNode(this.properties,"metalness","f"),normalScale:new PropertyNode(this.properties,"normalScale","v2")}}MeshStandardNode.prototype=Object.create(StandardNode.prototype),MeshStandardNode.prototype.constructor=MeshStandardNode,MeshStandardNode.prototype.nodeType="MeshStandard",MeshStandardNode.prototype.build=function(e){var o=this.properties,r=this.inputs;if(e.isShader("fragment")){var t=e.findNode(o.color,r.color),a=e.resolve(o.map);this.color=a?new OperatorNode(t,a,OperatorNode.MUL):t;var s=e.findNode(o.roughness,r.roughness),d=e.resolve(o.roughnessMap);this.roughness=d?new OperatorNode(s,new SwitchNode(d,"g"),OperatorNode.MUL):s;var n=e.findNode(o.metalness,r.metalness),p=e.resolve(o.metalnessMap);this.metalness=p?new OperatorNode(n,new SwitchNode(p,"b"),OperatorNode.MUL):n,o.normalMap?(this.normal=new NormalMapNode(e.resolve(o.normalMap)),this.normal.scale=e.findNode(o.normalScale,r.normalScale)):this.normal=void 0,this.environment=e.resolve(o.envMap)}return StandardNode.prototype.build.call(this,e)},MeshStandardNode.prototype.toJSON=function(e){var o=this.getJSONNode(e);return o||(o=this.createJSONNode(e),console.warn(".toJSON not implemented in",this)),o};export{MeshStandardNode};