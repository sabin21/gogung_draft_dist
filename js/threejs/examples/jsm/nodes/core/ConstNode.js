import{TempNode}from"./TempNode.js";var declarationRegexp=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function ConstNode(e,t){TempNode.call(this),this.parse(e||ConstNode.PI,t)}ConstNode.PI="PI",ConstNode.PI2="PI2",ConstNode.RECIPROCAL_PI="RECIPROCAL_PI",ConstNode.RECIPROCAL_PI2="RECIPROCAL_PI2",ConstNode.LOG2="LOG2",ConstNode.EPSILON="EPSILON",ConstNode.prototype=Object.create(TempNode.prototype),ConstNode.prototype.constructor=ConstNode,ConstNode.prototype.nodeType="Const",ConstNode.prototype.getType=function(e){return e.getTypeByFormat(this.type)},ConstNode.prototype.parse=function(e,t){this.src=e||"";var o,s,n="",i=this.src.match(declarationRegexp);this.useDefine=t||"#"===this.src.charAt(0),i&&i.length>1?(s=i[1],o=i[2],n=i[3]):(o=this.src,s="f"),this.name=o,this.type=s,this.value=n},ConstNode.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},ConstNode.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},ConstNode.prototype.copy=function(e){return TempNode.prototype.copy.call(this,e),this.parse(e.src,e.useDefine),this},ConstNode.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t};export{ConstNode};