import{TempNode}from"../core/TempNode.js";import{FunctionNode}from"../core/FunctionNode.js";import{MaxMIPLevelNode}from"./MaxMIPLevelNode.js";function SpecularMIPLevelNode(e,t){TempNode.call(this,"f"),this.roughness=e,this.texture=t,this.maxMIPLevel=void 0}SpecularMIPLevelNode.Nodes={getSpecularMIPLevel:new FunctionNode(["float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {","\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );","\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},SpecularMIPLevelNode.prototype=Object.create(TempNode.prototype),SpecularMIPLevelNode.prototype.constructor=SpecularMIPLevelNode,SpecularMIPLevelNode.prototype.nodeType="SpecularMIPLevel",SpecularMIPLevelNode.prototype.setTexture=function(e){return this.texture=e,this},SpecularMIPLevelNode.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new MaxMIPLevelNode,this.maxMIPLevel.texture=this.texture;var o=e.include(SpecularMIPLevelNode.Nodes.getSpecularMIPLevel);return e.format(o+"( "+this.roughness.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},SpecularMIPLevelNode.prototype.copy=function(e){return TempNode.prototype.copy.call(this,e),this.texture=e.texture,this.roughness=e.roughness,this},SpecularMIPLevelNode.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture,t.roughness=this.roughness),t};export{SpecularMIPLevelNode};