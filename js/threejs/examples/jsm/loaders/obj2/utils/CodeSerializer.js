const CodeSerializer={serializeObject:function(e,t){let n,o=e+" = {\n\n";for(let e in t)n=t[e],"string"==typeof n||n instanceof String?(n=n.replace(/\n/g,"\\n"),n=n.replace(/\r/g,"\\r"),o+="\t"+e+': "'+n+'",\n'):n instanceof Array?o+="\t"+e+": ["+n+"],\n":"object"==typeof n?(console.log('Omitting object "'+e+'" and replace it with empty object.'),o+="\t"+e+": {},\n"):o+="\t"+e+": "+n+",\n";return o+="}\n\n",o},serializeClass:function(e,t,n,o){let i,r,s,a,c,l=[],u=[],d=[],g=null!=n;Array.isArray(o)||(o=[]);for(let n in t.prototype)i=t.prototype[n],a=new CodeSerializationInstruction(n,e+".prototype."+n),a.setCode(i.toString()),"constructor"===n?a.isRemoveCode()||(r=e+" = "+a.getCode()+";\n\n"):"function"==typeof i&&(c=o[n],c instanceof CodeSerializationInstruction&&c.getName()===a.getName()&&(a=c),a.isRemoveCode()||(g?l.push(a.getFullName()+" = "+a.getCode()+";\n\n"):l.push("\t"+a.getName()+": "+a.getCode()+",\n\n")));for(let n in t)i=t[n],a=new CodeSerializationInstruction(n,e+"."+n),"function"==typeof i?(c=o[n],c instanceof CodeSerializationInstruction&&c.getName()===a.getName()?a=c:a.setCode(i.toString()),a.isRemoveCode()||d.push(a.getFullName()+" = "+a.getCode()+";\n\n")):("string"==typeof i||i instanceof String?a.setCode('"'+i.toString()+'"'):"object"==typeof i?(console.log('Omitting object "'+a.getName()+'" and replace it with empty object.'),a.setCode("{}")):a.setCode(i),a.isRemoveCode()||u.push(a.getFullName()+" = "+a.getCode()+";\n"));let p=r+"\n\n";for(g&&(p+=e+".prototype = Object.create( "+n+".prototype );\n"),p+=e+".prototype.constructor = "+e+";\n",p+="\n\n",s=0;s<u.length;s++)p+=u[s];for(p+="\n\n",s=0;s<d.length;s++)p+=d[s];if(p+="\n\n",g)for(s=0;s<l.length;s++)p+=l[s];else{for(p+=e+".prototype = {\n\n",s=0;s<l.length;s++)p+=l[s];p+="\n};"}return p+="\n\n",p}},CodeSerializationInstruction=function(e,t){this.name=e,this.fullName=t,this.code=null,this.removeCode=!1};CodeSerializationInstruction.prototype={constructor:CodeSerializationInstruction,getName:function(){return this.name},getFullName:function(){return this.fullName},setCode:function(e){return this.code=e,this},getCode:function(){return this.code},setRemoveCode:function(e){return this.removeCode=e,this},isRemoveCode:function(){return this.removeCode}};export{CodeSerializer,CodeSerializationInstruction};