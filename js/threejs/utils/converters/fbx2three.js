var fs=require("fs"),path=require("path");process.argv.length<=2&&(console.log(`Usage: ${path.basename(__filename)} model.fbx`),process.exit(-1));var PRECISION=6;function parseNumber(e,r){return"number"==typeof r?parseFloat(r.toFixed(PRECISION)):r}THREE=require("../../build/three.js"),require("../../examples/js/curves/NURBSCurve.js"),require("../../examples/js/curves/NURBSUtils.js"),require("../../examples/js/loaders/FBXLoader.js"),global.Zlib=require("../../examples/js/libs/inflate.min.js").Zlib,global.window={innerWidth:1024,innerHeight:768,URL:{createObjectURL:function(){throw new Error("fbx2three: Images in binary format not yet supported.")}}},THREE.ImageLoader.prototype.load=function(e,r){void 0!==this.path&&(e=this.path+e),fs.existsSync(e)?r(fs.readFileSync(e)):r(new Buffer(""))},THREE.ImageUtils.getDataURL=function(e){if(!(e instanceof Buffer))throw new Error("fbx2three: Image should be loaded as Buffer.");var r="data:";return r+=this.format===THREE.RGBAFormat?"image/png":"image/jpeg",(r+=";base64,")+e.toString("base64")};var file=process.argv[2],resourceDirectory=THREE.LoaderUtils.extractUrlBase(file),loader=new THREE.FBXLoader,arraybuffer=fs.readFileSync(file).buffer,object=loader.parse(arraybuffer,resourceDirectory),content=JSON.stringify(object.toJSON(),parseNumber);fs.writeFileSync(path.basename(file,".fbx")+".json",content,"utf8");